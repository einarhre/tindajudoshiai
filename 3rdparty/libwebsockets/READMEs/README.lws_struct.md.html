<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>README.lws_struct</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<h1 id="lws_struct">lws_struct</h1>
<h2 id="overview">Overview</h2>
<p>lws_struct provides a lightweight method for serializing and deserializing C structs to and from JSON, and to and from sqlite3.</p>
<figure>
<img src="../doc-assets/lws_struct-overview.svg" alt="lws_struct overview" /><figcaption>lws_struct overview</figcaption>
</figure>
<ul>
<li><p>you provide a metadata array describing struct members one-time, then call generic apis to serialize and deserialize</p></li>
<li><p>supports flat structs, single child struct pointers, and unbounded arrays / linked-lists of child objects automatically using <a href="./README.lws_dll.md">lws_dll2 linked-lists</a></p></li>
<li><p>supports boolean and C types char, int, long, long long in explicitly signed and unsigned forms</p></li>
<li><p>supports both char * type string members where the unbounded content is separate and pointed to, and fixed length char array[] type members where the content is part of the struct</p></li>
<li><p>huge linear strings are supported by storing to a temp lwsac of chained chunks, which is written into a single linear chunk in the main lwsac once the total string length is known</p></li>
<li><p>deserialization allocates into an <a href="../lib/misc/lwsac/README.md">lwsac</a>, so everything is inside as few heap allocations as possible while still able to expand to handle arbitrary array or strins sizes</p></li>
<li><p>when deserialized structs are finished with, a single call to free the lwsac frees the whole thing without having to walk it</p></li>
<li><p>stateful serializaton and deserialization allows as-you-get packets incremental parsing and production of chunks of as-you-can-send incremental serialization output cleanly</p></li>
</ul>
<h2 id="examples">Examples</h2>
</body>
</html>
